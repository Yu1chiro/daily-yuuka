<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yukaa's Dark Room ðŸ¦‡ðŸ©¸</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mali:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'fire-red': '#D2042D',
                        'madder': '#A8092D',
                        'claret': '#7D0D2C',
                        'choco': '#450C1C',
                        'night': '#0D0A0B',
                    },
                    fontFamily: {
                        'mali': ['Mali', 'cursive'],
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'pulse-glow': 'pulseGlow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        pulseGlow: {
                            '0%, 100%': { opacity: 1, boxShadow: '0 0 15px rgba(210,4,45,0.4)' },
                            '50%': { opacity: .7, boxShadow: '0 0 25px rgba(210,4,45,0.8)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom scrollbar for dark theme */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0D0A0B; }
        ::-webkit-scrollbar-thumb { background: #7D0D2C; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #D2042D; }
    </style>
</head>
<body class="bg-night text-white min-h-screen font-mali relative overflow-x-hidden flex flex-col items-center py-12 px-5">
    
    <div class="absolute top-0 left-0 w-full h-96 bg-gradient-to-b from-choco/60 via-night to-transparent -z-10 pointer-events-none"></div>
    <div class="fixed top-10 left-4 text-3xl opacity-20 animate-float" style="animation-delay: 0s;">ðŸ¥€</div>
    <div class="fixed bottom-20 right-8 text-4xl opacity-20 animate-float" style="animation-delay: 1.5s;">ðŸ¦‡</div>
    <div class="fixed top-1/3 right-4 text-2xl opacity-20 animate-float" style="animation-delay: 0.7s;">ðŸ©¸</div>

    <main class="w-full max-w-md z-10 flex flex-col items-center">
        
        <div class="relative mb-4 group cursor-pointer">
            <div class="w-28 h-28 md:w-32 md:h-32 rounded-full p-1 bg-gradient-to-b from-fire-red to-choco animate-pulse-glow">
                <img id="profileImage" src="https://via.placeholder.com/150/0D0A0B/D2042D?text=Yukaa" alt="Yukaa Profile" class="w-full h-full rounded-full object-cover border-4 border-night">
            </div>
            <div class="absolute -bottom-2 -right-2 text-3xl animate-bounce drop-shadow-lg">ðŸ§¸</div>
        </div>

        <h1 class="text-3xl md:text-4xl font-bold text-white mb-2 flex items-center gap-2 drop-shadow-[0_2px_2px_rgba(210,4,45,0.8)]">
            <span id="profileName">Yukaa</span>
        </h1>
        
        <p id="profileQuotes" class="text-sm md:text-base text-gray-300 text-center mb-8 px-4 font-semibold italic">
            Soft, cute, but loves the dark room... ðŸ–¤ðŸŽ€
        </p>

        <div id="linksContainer" class="w-full space-y-4 flex flex-col items-center">
            <p id="loadingText" class="text-fire-red animate-pulse">Summoning links... ðŸ¦‡</p>
        </div>


    </main>

    <script>
        // Data Fallback (Default Yukaa Data)
        // Digunakan jika API belum public / token tidak ada, agar UI tetap terlihat sempurna
        const defaultProfile = {
            name: "Yukaa",
            quotes: "Welcome to my dark room~ Let's play together! ðŸ§¸ðŸ–¤ðŸ©¸",
            profile_image_url: "https://i.pinimg.com/736x/21/bc/11/21bc11eb857e4e83f2a170562be3ed07.jpg" // Cute dark anime placeholder
        };

        const defaultLinks = [
            { title: "My YouTube Channel ðŸŽ€", url: "#" }
        ];

        // Function to render links with UI styling
        const renderLinks = (links) => {
            const container = document.getElementById('linksContainer');
            container.innerHTML = ''; // Clear loading

            if (links.length === 0) {
                container.innerHTML = '<p class="text-gray-500 italic">No links yet... ðŸ¥€</p>';
                return;
            }

            links.forEach(link => {
                const linkElement = document.createElement('a');
                linkElement.href = link.url;
                linkElement.target = '_blank';
                linkElement.className = `
                    block w-full max-w-[90%] md:max-w-full py-4 px-6 
                    bg-choco/40 hover:bg-madder/80 backdrop-blur-sm
                    border-2 border-claret hover:border-fire-red
                    rounded-full text-center font-bold text-white text-lg 
                    transition-all duration-300 transform hover:-translate-y-1 
                    hover:shadow-[0_5px_20px_rgba(210,4,45,0.6)]
                    relative overflow-hidden group
                `;
                
                // Add a cute subtle shine effect on hover
                linkElement.innerHTML = `
                    <div class="absolute inset-0 w-1/4 h-full bg-white/20 -skew-x-12 -translate-x-full group-hover:animate-[shine_1s_ease-in-out]"></div>
                    <span class="relative z-10 drop-shadow-md">${link.title}</span>
                `;
                
                container.appendChild(linkElement);
            });
        };

        // Fetch logic
       const fetchPublicData = async () => {
            try {
                document.getElementById('loadingText').innerText = "Summoning links... ðŸ¦‡";
                
                // GANTI 'yukaa' DENGAN USERNAME YANG KAMU BIKIN WAKTU REGISTER DI DATABASE!
                const targetUsername = 'Admin'; 
                
                const res = await fetch(`/api/u/${targetUsername}`);
                
                if (res.ok) {
                    const data = await res.json();
                    
                    // Update Profile dari Database
                    document.getElementById('profileName').innerText = data.profile.name || targetUsername;
                    if (data.profile.quotes) document.getElementById('profileQuotes').innerText = data.profile.quotes;
                    if (data.profile.profile_image_url) document.getElementById('profileImage').src = data.profile.profile_image_url;
                    
                    // Render Links dari Database
                    renderLinks(data.links);
                } else {
                    throw new Error("Gagal fetch data dari server");
                }
            } catch (error) {
                console.error("Error:", error);
                // Fallback UI kalau database lagi down atau username gak ketemu
                document.getElementById('profileName').innerText = defaultProfile.name;
                document.getElementById('profileQuotes').innerText = defaultProfile.quotes;
                document.getElementById('profileImage').src = defaultProfile.profile_image_url;
                renderLinks(defaultLinks);
            }
        };
        // Add custom shine keyframe dynamically
        const style = document.createElement('style');
        style.innerHTML = `
            @keyframes shine {
                100% { left: 125%; }
            }
        `;
        document.head.appendChild(style);

        // Run fetch on load
        window.onload = fetchPublicData;
    </script>
</body>
</html>